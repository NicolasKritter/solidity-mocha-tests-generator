(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{qR3m:function(t,e,n){"use strict";n.r(e),n.d(e,"UnitTestAppModule",(function(){return C}));var r=n("jAig"),o=n("ofXK"),c=n("nede"),a=n("fXoL");let i=(()=>{class t{constructor(){}static initFile(t){return`\n    const ${t} = artifacts.require("${t}");\n    const assert = require("chai").assert;\n    const truffleAssert = require('truffle-assertions');\n\n    `}static addContract(t){return`\n    contract("${t}", (accounts) => {\n\n      let access;\n      const ownerAccount = accounts[0];\n\n      before(async () => {\n          access = await Access.new({\n              from: ownerAccount\n          });\n      });\n    `}static closeFile(){return"});"}static writeOutputs(t){if(t.length<1)return"//TODO Attach Event or getter";let e,n="",r=0;return t.forEach(t=>{e=c.a.parseOut(t),n+=`assert.equal(result['${r}']${e.transfo}, ${e.val}, "should be ${e.val} and type ${e.realType}");\n       `,r++}),n}static writeInputs(t){let e,n="",r="";return t.forEach(t=>{e=c.a.parseIn(t),r+=`const ${e.transfo} = ${e.val}; // ${e.realType}`+"\n",n+=` ${e.transfo},`}),n.length&&(n=n.slice(0,n.length-1)),{ins:n,vars:r}}static writeFunctionsTest(e){let n=" ";return e.forEach(e=>{n+=t.writeTestForFunction(e)}),n}static writeTestForFunction(e){console.log(e);const n=t.writeInputs(e.inputs),r=t.writeOutputs(e.outputs);return`\n    it('${e.name}', async ()=>{ //TODO TOCHECK\n    ${n.vars}\n     const result = await access.${e.name}(${n.ins});\n     ${r}\n    });\n    `}static writeOutputsEvent(t){let e,n="",r="";return t.forEach(t=>{e=c.a.parseIn(t),n+=` ev.${t.name} == ${e.val} &`,r+=` ${e.transfo}: ${e.realType},`}),n.length&&(n=n.slice(0,n.length-1),n="return "+n+";"),r.length&&(r=r.slice(0,r.length-1)),[n,r]}static writeEvent(e){const n=t.writeOutputsEvent(e.inputs);return`\n            truffleAssert.eventEmitted(callThatTriggersTheEvent, '${e.name}', (ev) => {\n              ${n[0]} // {${n[1]}}\n              });\n          `}static writeEventsTest(t){let e="";return t.forEach(t=>{e+=this.writeEvent(t)}),e}static writeTest(e){const n=c.a.parseABIForElements(e),r=c.a.getContractName(e);console.log("sorted",n);const o=t.writeEventsTest(n.eList);let a=this.initFile(r);return a+=this.addContract(r),a+=this.writeFunctionsTest(n.fList),a+=this.closeFile(),[a,o]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var s=n("bnEv"),l=n("/t3+"),b=n("wZkO"),u=n("kmnG"),f=n("qFsG"),p=n("3Pt+"),d=n("bTqV"),m=n("NFeN");function h(t,e){if(1&t){const t=a.Sb();a.Rb(0,"button",17),a.Zb("click",(function(){return a.nc(t),a.dc().urlContractJson=""})),a.Rb(1,"mat-icon"),a.uc(2,"close"),a.Qb(),a.Qb()}}function g(t,e){if(1&t){const t=a.Sb();a.Rb(0,"mat-tab",18),a.Rb(1,"div",19),a.Rb(2,"div",3),a.Rb(3,"mat-form-field",20),a.Rb(4,"textarea",21),a.uc(5),a.Qb(),a.Qb(),a.Rb(6,"button",22),a.Zb("click",(function(){return a.nc(t),a.dc().copyResultToClipBoard()})),a.uc(7,"Copy to ClipBoard"),a.Qb(),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.dc();a.Bb(5),a.vc(t.result)}}function R(t,e){if(1&t){const t=a.Sb();a.Rb(0,"mat-tab",23),a.Rb(1,"div",19),a.Rb(2,"div",24),a.Rb(3,"mat-form-field",20),a.Rb(4,"textarea",25),a.uc(5),a.Qb(),a.Qb(),a.Rb(6,"button",22),a.Zb("click",(function(){return a.nc(t),a.dc().copyEventToClipBoard()})),a.uc(7,"Copy to ClipBoard"),a.Qb(),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.dc();a.Bb(5),a.vc(t.events)}}let v=(()=>{class t extends s.a{constructor(){super()}ngOnInit(){}writeTest(){if(!this.abiInput)return;const t=JSON.parse(this.abiInput),e=i.writeTest(t);this.result=e[0],this.events=e[1]}copyResultToClipBoard(){this.copyToClipboard(this.result)}copyEventToClipBoard(){this.copyToClipboard(this.events)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Gb({type:t,selectors:[["app-unit-test"]],features:[a.yb],decls:39,vars:6,consts:[["label","ABI"],["cdkscrollable","",1,"margin-h-15","fill-remaining-space","flex-block"],[1,"element","flex-block","flex-block_column","margin-h-15"],[1,"element"],["type","file",2,"display","none",3,"change"],["fileInput",""],["readonly","","matInput","","type","text",3,"ngModel","ngModelChange"],["mat-flat-button","","color","accent",1,"margin-h-15",3,"click"],["disabled","","matInput","","type","text","placeholder","https://url/contract.json",1,"inpt-text",3,"ngModel","ngModelChange"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"fill-remaining-space"],["disabled","","mat-flat-button","","color","primary"],[1,"element-x-2","flex-block","flex-block_column"],["rows","15","matInput","","placeholder","contract.json generated by truffle or your solc compilation","required","",3,"ngModel","ngModelChange"],["mat-flat-button","","color","accent",3,"click"],["label","Result - Functions",4,"ngIf"],["label","Result - Events",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["label","Result - Functions"],[1,"flex-line","margin-h-15","fill-remaining-space"],[1,"element","width-100"],["rows","25","matInput","","placeholder","Mocha test file",1,"keep-lines","code-font"],["mat-flat-button","","color","primary",3,"click"],["label","Result - Events"],[1,"keep-lines","element"],["rows","25","matInput","","placeholder","Events test code",1,"keep-lines","code-font"]],template:function(t,e){1&t&&(a.Rb(0,"mat-toolbar"),a.Rb(1,"mat-toolbar-row"),a.Rb(2,"h2"),a.uc(3,"Load ABI & Generate Test File"),a.Qb(),a.Qb(),a.Qb(),a.Rb(4,"mat-tab-group"),a.Rb(5,"mat-tab",0),a.Rb(6,"div",1),a.Rb(7,"div",2),a.Rb(8,"h4"),a.uc(9,"Import contract.json from computer"),a.Qb(),a.Rb(10,"div",3),a.Rb(11,"div",3),a.Rb(12,"input",4,5),a.Zb("change",(function(t){return e.onFileChanged(t)})),a.Qb(),a.Rb(14,"mat-form-field",3),a.Rb(15,"input",6),a.Zb("ngModelChange",(function(t){return e.fileName=t})),a.Qb(),a.Qb(),a.Rb(16,"button",7),a.Zb("click",(function(){return e.selectFile()})),a.uc(17,"Select File"),a.Qb(),a.Qb(),a.Qb(),a.Rb(18,"div",3),a.Rb(19,"h4"),a.uc(20,"Import contract.json from URL"),a.Qb(),a.Rb(21,"mat-form-field",3),a.Rb(22,"mat-label"),a.uc(23,"Load from Url"),a.Qb(),a.Rb(24,"input",8),a.Zb("ngModelChange",(function(t){return e.urlContractJson=t})),a.Qb(),a.tc(25,h,3,0,"button",9),a.Qb(),a.Nb(26,"span",10),a.Rb(27,"button",11),a.uc(28,"Load from url"),a.Qb(),a.Qb(),a.Qb(),a.Rb(29,"div",12),a.Rb(30,"h4"),a.uc(31,"Contract.json content"),a.Qb(),a.Rb(32,"mat-form-field"),a.Rb(33,"textarea",13),a.Zb("ngModelChange",(function(t){return e.abiInput=t})),a.Qb(),a.Qb(),a.Rb(34,"div",3),a.Rb(35,"button",14),a.Zb("click",(function(){return e.writeTest()})),a.uc(36,"Generate Test"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.tc(37,g,8,1,"mat-tab",15),a.tc(38,R,8,1,"mat-tab",16),a.Qb()),2&t&&(a.Bb(15),a.gc("ngModel",e.fileName),a.Bb(9),a.gc("ngModel",e.urlContractJson),a.Bb(1),a.gc("ngIf",e.urlContractJson),a.Bb(8),a.gc("ngModel",e.abiInput),a.Bb(4),a.gc("ngIf",e.result),a.Bb(1),a.gc("ngIf",e.result))},directives:[l.a,l.c,b.b,b.a,u.a,f.a,p.b,p.h,p.j,d.b,u.d,o.j,p.k,u.e,m.a],styles:[""]}),t})();var Q=n("tyNb");const w=[{path:"",component:v}];let y=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[Q.b.forChild(w)],Q.b]}),t})(),C=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[o.b,y,r.a,p.d]]}),t})()}}]);